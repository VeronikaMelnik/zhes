(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{9500:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signIn",function(){return n(5521)}])},6021:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var a=n(5893),r=n(2293),s=n(8862),i=n(3832),o=n.n(i);let c=()=>(0,a.jsx)("footer",{className:o().wrapper,children:(0,a.jsx)(r.Z,{position:"static",children:(0,a.jsx)(s.Z,{variant:"h2",fontSize:"1.5rem",children:'"ЖЭС - обращения" \xa9 2022.'})})})},4047:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var a=n(5893),r=n(9008),s=n.n(r);let i=e=>{let{title:t}=e;return(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/logo.svg"})]})}},7778:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var a=n(5893),r=n(2293),s=n(155),i=n(3946),o=n(8862),c=n(3321),l=n(1881),u=n.n(l),h=n(5567);let d=e=>{let{token:t,clear:n}=e;return(0,a.jsx)(r.Z,{position:"static",color:"default",children:(0,a.jsxs)(s.Z,{disableGutters:!0,className:u().toolbar,children:[(0,a.jsxs)(i.Z,{color:"primary",href:"/",children:[(0,a.jsx)(h.Z,{fontSize:"large"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Z,{variant:"h1",fontSize:"1.5rem",children:"\xabЖЭС-обращения\xbb"}),(0,a.jsx)(o.Z,{variant:"h3",fontSize:"0.8rem",children:"Платформа для подачи обращений"})]})]}),(0,a.jsxs)(s.Z,{children:[!t&&(0,a.jsx)(c.Z,{href:"/signIn",children:"Войти"}),!t&&(0,a.jsx)(c.Z,{href:"/signUp",children:"Регистрация"}),!!t&&(0,a.jsx)(c.Z,{onClick:()=>{window.localStorage.clear(),n(null)},children:"Выйти"})]})]})})}},2165:function(e,t,n){"use strict";var a=n(8945);t.Z=new class{async createUser(e){await a.Z.post("".concat(this.baseLink,"/auth/signUp"),e).then(this.auth)}async loginUser(e){await a.Z.post("".concat(this.baseLink,"/auth/signIn"),e).then(this.auth)}async createUserRequest(e){let t=window.localStorage.getItem("token");await a.Z.post("".concat(this.baseLink,"/req"),e,{headers:{Authorization:"Bearer ".concat(t)}})}async getAllUserRequests(){let e=window.localStorage.getItem("token"),t=await a.Z.get("".concat(this.baseLink,"/req"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{let[t,n]=e.data;return{requests:t,total:n}});return t}async getUserRequest(e){let t=window.localStorage.getItem("token");return await a.Z.get("".concat(this.baseLink,"/req/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let t=e.data;return t})}async getUserResponse(e){let t=window.localStorage.getItem("token");return await a.Z.get("".concat(this.baseLink,"/req/res/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let t=e.data;return t})}async getAllUsers(){let e=window.localStorage.getItem("token");return await a.Z.get("".concat(this.baseLink,"/admin"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{let t=e.data;return t})}async getAllActiveRequestsForUser(e){let t=window.localStorage.getItem("token");return await a.Z.get("".concat(this.baseLink,"/admin/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let t=e.data;return t})}async createNewResponse(e,t){let n=window.localStorage.getItem("token");await a.Z.post("".concat(this.baseLink,"/admin/").concat(t),e,{headers:{Authorization:"Bearer ".concat(n)}})}async auth(e){let{role:t,token:n}=await e.data;return window.localStorage.setItem("token",n),window.localStorage.setItem("role",t),{role:t,token:n}}constructor(e){this.baseLink=e}}("http://localhost:5000/api")},5521:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n(5893),r=n(4047),s=n(7778),i=n(6021),o=n(629),c=n(3157),l=n(3321),u=n(7294),h=n(2165),d=n(1163);function g(){let[e,t]=(0,u.useState)(""),[n,g]=(0,u.useState)(""),[w,x]=(0,u.useState)({isErr:!1,message:""}),[p,f]=(0,u.useState)(null),m=(0,d.useRouter)();return(0,u.useEffect)(()=>{let e=window.localStorage.getItem("token");f(e)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.I,{title:"Войти"}),(0,a.jsx)(s.h,{token:p,clear:f}),(0,a.jsx)(o.Z,{sx:{width:"100%",padding:"1rem",display:"flex",justifyContent:"center"},children:(0,a.jsxs)(o.Z,{variant:"outlined",sx:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,a.jsx)(c.Z,{label:"email",value:e,onChange:e=>{t(e.currentTarget.value)},type:"email",required:!0}),(0,a.jsx)(c.Z,{error:w.isErr,helperText:w.isErr?w.message:null,label:"Пароль",value:n,type:"password",required:!0,onChange:e=>{x({isErr:!1,message:""}),g(e.currentTarget.value)}}),(0,a.jsx)(l.Z,{variant:"contained",onClick:()=>{if(n.length<8||n.length>256)x({isErr:!0,message:"пароль должен содержать от 8 до 256 символов"});else{let t=h.Z.loginUser({email:e,password:n});t.then(()=>{m.push("/",void 0,{shallow:!0})})}},children:"Войти"})]})}),(0,a.jsx)(i.$,{})]})}},3832:function(e){e.exports={wrapper:"Footer_wrapper__OqLJV",border:"Footer_border__akEkX"}},1881:function(e){e.exports={toolbar:"Header_toolbar__bvF_h"}},1163:function(e,t,n){e.exports=n(880)}},function(e){e.O(0,[558,774,888,179],function(){return e(e.s=9500)}),_N_E=e.O()}]);
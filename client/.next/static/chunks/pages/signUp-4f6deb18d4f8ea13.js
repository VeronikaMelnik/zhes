(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{791:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signUp",function(){return r(9392)}])},6021:function(e,t,r){"use strict";r.d(t,{$:function(){return c}});var n=r(5893),a=r(2293),s=r(8862),i=r(3832),o=r.n(i);let c=()=>(0,n.jsx)("footer",{className:o().wrapper,children:(0,n.jsx)(a.Z,{position:"static",children:(0,n.jsx)(s.Z,{variant:"h2",fontSize:"1.5rem",children:'"ЖЭС - обращения" \xa9 2022.'})})})},4047:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(5893),a=r(9008),s=r.n(a);let i=e=>{let{title:t}=e;return(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/logo.svg"})]})}},7778:function(e,t,r){"use strict";r.d(t,{h:function(){return d}});var n=r(5893),a=r(2293),s=r(155),i=r(3946),o=r(8862),c=r(3321),l=r(1881),u=r.n(l),h=r(5567);let d=e=>{let{token:t,clear:r}=e;return(0,n.jsx)(a.Z,{position:"static",color:"default",children:(0,n.jsxs)(s.Z,{disableGutters:!0,className:u().toolbar,children:[(0,n.jsxs)(i.Z,{color:"primary",href:"/",children:[(0,n.jsx)(h.Z,{fontSize:"large"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{variant:"h1",fontSize:"1.5rem",children:"\xabЖЭС-обращения\xbb"}),(0,n.jsx)(o.Z,{variant:"h3",fontSize:"0.8rem",children:"Платформа для подачи обращений"})]})]}),(0,n.jsxs)(s.Z,{children:[!t&&(0,n.jsx)(c.Z,{href:"/signIn",children:"Войти"}),!t&&(0,n.jsx)(c.Z,{href:"/signUp",children:"Регистрация"}),!!t&&(0,n.jsx)(c.Z,{onClick:()=>{window.localStorage.clear(),r(null)},children:"Выйти"})]})]})})}},2165:function(e,t,r){"use strict";var n=r(8945);t.Z=new class{async createUser(e){await n.Z.post("".concat(this.baseLink,"/auth/signUp"),e).then(this.auth)}async loginUser(e){await n.Z.post("".concat(this.baseLink,"/auth/signIn"),e).then(this.auth)}async createUserRequest(e){let t=window.localStorage.getItem("token");await n.Z.post("".concat(this.baseLink,"/req"),e,{headers:{Authorization:"Bearer ".concat(t)}})}async getAllUserRequests(){let e=window.localStorage.getItem("token"),t=await n.Z.get("".concat(this.baseLink,"/req"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{let[t,r]=e.data;return{requests:t,total:r}});return t}async getUserRequest(e){let t=window.localStorage.getItem("token");return await n.Z.get("".concat(this.baseLink,"/req/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let t=e.data;return t})}async getUserResponse(e){let t=window.localStorage.getItem("token");return await n.Z.get("".concat(this.baseLink,"/req/res/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let t=e.data;return t})}async getAllUsers(){let e=window.localStorage.getItem("token");return await n.Z.get("".concat(this.baseLink,"/admin"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{let t=e.data;return t})}async getAllActiveRequestsForUser(e){let t=window.localStorage.getItem("token");return await n.Z.get("".concat(this.baseLink,"/admin/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let t=e.data;return t})}async createNewResponse(e,t){let r=window.localStorage.getItem("token");await n.Z.post("".concat(this.baseLink,"/admin/").concat(t),e,{headers:{Authorization:"Bearer ".concat(r)}})}async auth(e){let{role:t,token:r}=await e.data;return window.localStorage.setItem("token",r),window.localStorage.setItem("role",t),{role:t,token:r}}constructor(e){this.baseLink=e}}("http://localhost:5000/api")},9392:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(5893),a=r(4047),s=r(7778),i=r(6021),o=r(629),c=r(3157),l=r(3321),u=r(2165),h=r(7294),d=r(1163);function g(){let[e,t]=(0,h.useState)(""),[r,g]=(0,h.useState)(""),[w,p]=(0,h.useState)(""),[x,f]=(0,h.useState)(""),[m,j]=(0,h.useState)({isErr:!1,message:""}),[Z,k]=(0,h.useState)(null),b=(0,d.useRouter)();return(0,h.useEffect)(()=>{let e=window.localStorage.getItem("token");k(e)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.I,{title:"Войти"}),(0,n.jsx)(s.h,{token:Z,clear:k}),(0,n.jsx)(o.Z,{sx:{width:"100%",padding:"1rem",display:"flex",justifyContent:"center"},children:(0,n.jsxs)(o.Z,{variant:"outlined",sx:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,n.jsx)(c.Z,{label:"email",value:e,onChange:e=>{t(e.currentTarget.value)},type:"email",required:!0}),(0,n.jsx)(c.Z,{label:"Имя",value:r,onChange:e=>{g(e.currentTarget.value)},type:"text",required:!0}),(0,n.jsx)(c.Z,{error:m.isErr,helperText:m.isErr?m.message:null,label:"Пароль",value:w,type:"password",required:!0,onChange:e=>{j({isErr:!1,message:""}),p(e.currentTarget.value)}}),(0,n.jsx)(c.Z,{error:m.isErr,helperText:m.isErr?m.message:null,label:"Повторите пароль",value:x,type:"password",required:!0,onChange:e=>{j({isErr:!1,message:""}),f(e.currentTarget.value)}}),(0,n.jsx)(l.Z,{variant:"contained",onClick:()=>{if(w!==x)j({isErr:!0,message:"пароли не совпадают"});else if(w.length<8||w.length>256)j({isErr:!0,message:"пароль должен содержать от 8 до 256 символов"});else{let t=u.Z.createUser({email:e,name:r,password:w});t.then(()=>{b.push("/",void 0,{shallow:!0})})}},children:"Регистрация"})]})}),(0,n.jsx)(i.$,{})]})}},3832:function(e){e.exports={wrapper:"Footer_wrapper__OqLJV",border:"Footer_border__akEkX"}},1881:function(e){e.exports={toolbar:"Header_toolbar__bvF_h"}},1163:function(e,t,r){e.exports=r(880)}},function(e){e.O(0,[558,774,888,179],function(){return e(e.s=791)}),_N_E=e.O()}]);